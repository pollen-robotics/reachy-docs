<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://doks-child-theme.netlify.app/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://doks-child-theme.netlify.app/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://doks-child-theme.netlify.app/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://doks-child-theme.netlify.app/main.2ce6518a46dc75a406c09aaf6c9e17cafaa4314b78bf996fc6c70f2ea8904dd061ecf59dfc78bfa741a051bcacb88794a053398a47918a50bd696ddbc58167eb.css integrity="sha512-LOZRikbcdaQGwJqvbJ4XyvqkMUt4v5lvxscPLqiQTdBh7PWd/Hi/p0GgUbysuIeUoFM5ikeRilC9aW3bxYFn6w==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Arms kinematics - Reachy 2023</title><meta name=description content="Presentation of Reachy's forward and inverse kinematics."><link rel=canonical href=https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Arms kinematics"><meta property="og:description" content="Presentation of Reachy's forward and inverse kinematics."><meta property="og:url" content="https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/"><meta property="og:site_name" content="Reachy 2023"><meta property="article:published_time" content="2023-07-25T17:39:00+02:00"><meta property="article:modified_time" content="2023-07-25T17:39:00+02:00"><meta property="og:image" content="https://doks-child-theme.netlify.app/favicon.ico"><meta property="og:image:alt" content="Reachy 2023"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@pollenrobotics"><meta name=twitter:creator content="@pollenrobotics"><meta name=twitter:title content="Arms kinematics"><meta name=twitter:description content="Presentation of Reachy's forward and inverse kinematics."><meta name=twitter:image content="https://doks-child-theme.netlify.app/favicon.ico"><meta name=twitter:image:alt content="Arms kinematics"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://doks-child-theme.netlify.app/#/schema/organization/1","name":"Pollen Robotics","url":"https://doks-child-theme.netlify.app/","sameAs":["https://twitter.com/pollenrobotics","https://www.linkedin.com/company/12781309/","https://github.com/pollen-robotics"],"logo":{"@type":"ImageObject","@id":"https://doks-child-theme.netlify.app/#/schema/image/1","url":"https://doks-child-theme.netlify.app/logo-pollen.png","width":400,"height":400,"caption":"Pollen Robotics"},"image":{"@id":"https://doks-child-theme.netlify.app/#/schema/image/1"}},{"@type":"WebSite","@id":"https://doks-child-theme.netlify.app/#/schema/website/1","url":"https://doks-child-theme.netlify.app/","name":"Reachy 2023","description":"Everything you need to know to setup, program and start interacting with your Reachy!","publisher":{"@id":"https://doks-child-theme.netlify.app/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/","url":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/","name":"Arms kinematics","description":"Presentation of Reachy\u0027s forward and inverse kinematics.","isPartOf":{"@id":"https://doks-child-theme.netlify.app/#/schema/website/1"},"about":{"@id":"https://doks-child-theme.netlify.app/#/schema/organization/1"},"datePublished":"2023-07-25T17:39:00CET","dateModified":"2023-07-25T17:39:00CET","breadcrumb":{"@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/"]}]},{"@type":"BreadcrumbList","@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://doks-child-theme.netlify.app/","url":"https://doks-child-theme.netlify.app/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://doks-child-theme.netlify.app/sdk/","url":"https://doks-child-theme.netlify.app/sdk/","name":"Sdk"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://doks-child-theme.netlify.app/sdk/first-moves/","url":"https://doks-child-theme.netlify.app/sdk/first-moves/","name":"First Moves"}},{"@type":"ListItem","position":4,"item":{"@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://doks-child-theme.netlify.app/sdk/first-moves/kinematics/#/schema/image/2","url":"https://doks-child-theme.netlify.app/favicon.ico","contentUrl":"https://doks-child-theme.netlify.app/favicon.ico","caption":"Arms kinematics"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://doks-child-theme.netlify.app/favicon.ico sizes=any><link rel=apple-touch-icon sizes=180x180 href=https://doks-child-theme.netlify.app/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://doks-child-theme.netlify.app/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://doks-child-theme.netlify.app/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://doks-child-theme.netlify.app/site.webmanifest></head><body class="docs single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label="Reachy 2023">Reachy 2023</a>
<button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Reachy 2023</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class=nav-item><a class="nav-link ps-0 py-1" href=/advanced/overview/full-kit/>Description</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/docs/getting-started/mobile-base/>Setup Reachy</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/sdk/getting-started/introduction/>Python SDK</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/vr/introduction/introduction/>VR</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/dashboard/introduction/introduction/>Dashboard</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/help/debug/check-dashboard/>Help</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://twitter.com/pollenrobotics><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><small class="ms-2 d-lg-none">Twitter</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/pollen-robotics/><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://discord.gg/vnYD6GAqJR><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 128 128" fill="#000" stroke="currentcolor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-discord"><path d="M45.23 57.2c-6.16.0-11.17 5.6-11.17 12.48s5 12.47 11.17 12.47 11.16-5.59 11.16-12.47S51.38 57.2 45.23 57.2zm0 21c-4 0-7.17-3.8-7.17-8.47s3.21-8.48 7.17-8.48 7.16 3.8 7.16 8.48-3.21 8.42-7.16 8.42z"/><path d="M121.83 59.58a156.78 156.78.0 00-11.52-31 2.1 2.1.0 00-.71-.77 87.08 87.08.0 00-15.23-7.17C84.55 17.07 79.91 17 79.72 17a2 2 0 00-2 1.72l-.6 4.17a133.14 133.14.0 00-26.28.0l-.6-4.17a2 2 0 00-2-1.72c-.19.0-4.83.0-14.65 3.61A87.08 87.08.0 0018.4 27.81a2.1 2.1.0 00-.71.77 156.72 156.72.0 00-11.52 31C1 80.46.0 90.91.0 91.34a2 2 0 00.49 1.5 55.2 55.2.0 0018.2 12.74A76.32 76.32.0 0038.48 111a2 2 0 001.92-1l5.4-9.25A105.08 105.08.0 0064 102.24a105.08 105.08.0 0018.2-1.51L87.6 110a2 2 0 001.72 1h.2a76.32 76.32.0 0019.78-5.38 55.2 55.2.0 0018.2-12.74 2 2 0 00.49-1.5C128 90.91 127.05 80.46 121.83 59.58zm-14.06 42.31a76.76 76.76.0 01-17.39 4.92l-4.08-7c4.68-1.24 14.42-4.46 21.83-11.2a2 2 0 10-2.69-3c-9 8.23-22.46 10.84-22.6 10.87h-.06A96.59 96.59.0 0164 98.24a96.59 96.59.0 01-18.78-1.7h-.06c-.14.0-13.55-2.64-22.6-10.87a2 2 0 10-2.69 3c7.41 6.74 17.15 10 21.83 11.2l-4.08 7a76.08 76.08.0 01-17.39-4.92A52.24 52.24.0 014.08 90.8c.33-2.91 1.68-13.07 6-30.24A156.25 156.25.0 0121 30.92 88.17 88.17.0 0135 24.4a61.35 61.35.0 0111.58-3.19l.35 2.39c-4 1-13.85 3.86-21.65 9.53a2 2 0 102.36 3.23c8.82-6.41 21-9.06 21.86-9.25A118.4 118.4.0 0164 26.27a117.64 117.64.0 0114.51.84c.91.19 13 2.83 21.86 9.25a2 2 0 102.36-3.23c-7.8-5.67-17.61-8.52-21.65-9.53l.35-2.39A61.75 61.75.0 0193 24.4a88.17 88.17.0 0114 6.52 156.25 156.25.0 0111 29.64c4.29 17.17 5.64 27.33 6 30.24a52.24 52.24.0 01-16.23 11.09z"/><path d="M82.77 57.2c-6.15.0-11.16 5.6-11.16 12.48s5 12.47 11.16 12.47 11.17-5.59 11.17-12.47S88.93 57.2 82.77 57.2zm0 21c-4 0-7.16-3.8-7.16-8.47s3.21-8.48 7.16-8.48 7.17 3.8 7.17 8.48S86.73 78.15 82.77 78.15z"/></svg><small class="ms-2 d-lg-none">Discord</small></a></li></ul><hr class="text-black-50 my-4 d-lg-none"><button id=mode class="btn btn-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></div></div></nav></header></div><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-uppercase mb-2">Getting Started</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/getting-started/introduction>Introduction</a></li><li><a class=docs-link href=/sdk/getting-started/install>Installation</a></li><li><a class=docs-link href=/sdk/getting-started/finding-ip>Finding Reachy's IP</a></li><li><a class=docs-link href=/sdk/getting-started/hello-world>Hello World</a></li></ul><h3 class="h6 text-uppercase mb-2">First moves</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/first-moves/intro>Once you're connected</a></li><li><a class=docs-link href=/sdk/first-moves/safety>Safety first</a></li><li><a class=docs-link href=/sdk/first-moves/kinematics>Arms kinematics</a></li><li><a class=docs-link href=/sdk/first-moves/arm>Controlling the arm</a></li><li><a class=docs-link href=/sdk/first-moves/record>Record and play trajectories</a></li><li><a class=docs-link href=/sdk/first-moves/head>Controlling the head</a></li><li><a class=docs-link href=/sdk/first-moves/cameras>Reachy's cameras</a></li><li><a class=docs-link href=/sdk/first-moves/fans>Controlling the fans</a></li></ul><h3 class="h6 text-uppercase mb-2">Mobile base</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/mobile-base/getting-started>Getting started with the mobile base</a></li><li><a class=docs-link href=/sdk/mobile-base/moving-the-base>Moving the mobile base</a></li><li><a class=docs-link href=/sdk/mobile-base/advanced>Advanced</a></li><li><a class=docs-link href=/sdk/mobile-base/safety>Anti-collision safety</a></li><li><a class=docs-link href=/sdk/mobile-base/mobile-base-alone>Using the mobile base without Reachy</a></li></ul><h3 class="h6 text-uppercase mb-2">Application</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/application/idle>Idle</a></li><li><a class=docs-link href=/sdk/application/face-tracking>Face tracking</a></li></ul><h3 class="h6 text-uppercase mb-2">Appendix</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/appendix/apis>APIs</a></li><li><a class=docs-link href=/sdk/appendix/support>Support</a></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav id=sidebar-default class=docs-links aria-label="Main navigation"><h3 class="h6 text-uppercase mb-2">Getting Started</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/getting-started/introduction>Introduction</a></li><li><a class=docs-link href=/sdk/getting-started/install>Installation</a></li><li><a class=docs-link href=/sdk/getting-started/finding-ip>Finding Reachy's IP</a></li><li><a class=docs-link href=/sdk/getting-started/hello-world>Hello World</a></li></ul><h3 class="h6 text-uppercase mb-2">First moves</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/first-moves/intro>Once you're connected</a></li><li><a class=docs-link href=/sdk/first-moves/safety>Safety first</a></li><li><a class=docs-link href=/sdk/first-moves/kinematics>Arms kinematics</a></li><li><a class=docs-link href=/sdk/first-moves/arm>Controlling the arm</a></li><li><a class=docs-link href=/sdk/first-moves/record>Record and play trajectories</a></li><li><a class=docs-link href=/sdk/first-moves/head>Controlling the head</a></li><li><a class=docs-link href=/sdk/first-moves/cameras>Reachy's cameras</a></li><li><a class=docs-link href=/sdk/first-moves/fans>Controlling the fans</a></li></ul><h3 class="h6 text-uppercase mb-2">Mobile base</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/mobile-base/getting-started>Getting started with the mobile base</a></li><li><a class=docs-link href=/sdk/mobile-base/moving-the-base>Moving the mobile base</a></li><li><a class=docs-link href=/sdk/mobile-base/advanced>Advanced</a></li><li><a class=docs-link href=/sdk/mobile-base/safety>Anti-collision safety</a></li><li><a class=docs-link href=/sdk/mobile-base/mobile-base-alone>Using the mobile base without Reachy</a></li></ul><h3 class="h6 text-uppercase mb-2">Application</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/application/idle>Idle</a></li><li><a class=docs-link href=/sdk/application/face-tracking>Face tracking</a></li></ul><h3 class="h6 text-uppercase mb-2">Appendix</h3><ul class=list-unstyled><li><a class=docs-link href=/sdk/appendix/apis>APIs</a></li><li><a class=docs-link href=/sdk/appendix/support>Support</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#arm-coordinate-system>Arm coordinate system</a><ul><li><a href=#joint-coordinates>Joint coordinates</a></li><li><a href=#kinematic-model>Kinematic model</a></li><li><a href=#switching-between-joint-and-cartesian-coordinates>Switching between joint and cartesian coordinates</a></li></ul></li><li><a href=#forward-kinematics>Forward kinematics</a></li><li><a href=#inverse-kinematics>Inverse kinematics</a><ul><li><a href=#example-square-movement>Example: square movement</a></li></ul></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#arm-coordinate-system>Arm coordinate system</a><ul><li><a href=#joint-coordinates>Joint coordinates</a></li><li><a href=#kinematic-model>Kinematic model</a></li><li><a href=#switching-between-joint-and-cartesian-coordinates>Switching between joint and cartesian coordinates</a></li></ul></li><li><a href=#forward-kinematics>Forward kinematics</a></li><li><a href=#inverse-kinematics>Inverse kinematics</a><ul><li><a href=#example-square-movement>Example: square movement</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Arms kinematics</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#arm-coordinate-system>Arm coordinate system</a><ul><li><a href=#joint-coordinates>Joint coordinates</a></li><li><a href=#kinematic-model>Kinematic model</a></li><li><a href=#switching-between-joint-and-cartesian-coordinates>Switching between joint and cartesian coordinates</a></li></ul></li><li><a href=#forward-kinematics>Forward kinematics</a></li><li><a href=#inverse-kinematics>Inverse kinematics</a><ul><li><a href=#example-square-movement>Example: square movement</a></li></ul></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#arm-coordinate-system>Arm coordinate system</a><ul><li><a href=#joint-coordinates>Joint coordinates</a></li><li><a href=#kinematic-model>Kinematic model</a></li><li><a href=#switching-between-joint-and-cartesian-coordinates>Switching between joint and cartesian coordinates</a></li></ul></li><li><a href=#forward-kinematics>Forward kinematics</a></li><li><a href=#inverse-kinematics>Inverse kinematics</a><ul><li><a href=#example-square-movement>Example: square movement</a></li></ul></li></ul></nav></div></nav><p>Make sure you checked the <a href=https://doks-child-theme.netlify.app/sdk/first-moves/safety/>safety page</a> before controling the arm.</p><p>This page assumes that you went through the <a href=https://doks-child-theme.netlify.app/sdk/getting-started/hello-world/>Hello World</a> so that you know how to connect to the robot and that you also know how to use the <em>goto()</em> function presented in <a href=https://doks-child-theme.netlify.app/sdk/first-moves/arm/>Controling the arm</a>.</p><h2 id=arm-coordinate-system>Arm coordinate system <a href=#arm-coordinate-system class=anchor aria-hidden=true>#</a></h2><h3 id=joint-coordinates>Joint coordinates <a href=#joint-coordinates class=anchor aria-hidden=true>#</a></h3><p>If you remember the <a href=https://doks-child-theme.netlify.app/sdk/first-moves/arm/#goto-function><em>goto()</em> function</a>, to generate a trajectory for the requested joints you need to pass a dictionnary of joints with the requested position as the <em>goal_positions</em> argument.</p><p>For example, to place the right arm in a right angled position, we defined the <em>right_angled_position</em> dictionnary.</p><pre><code class=language-python>right_angled_position = {
    reachy.r_arm.r_shoulder_pitch: 0,
    reachy.r_arm.r_shoulder_roll: 0,
    reachy.r_arm.r_arm_yaw: 0,
    reachy.r_arm.r_elbow_pitch: -90,
    reachy.r_arm.r_forearm_yaw: 0,
    reachy.r_arm.r_wrist_pitch: 0,
    reachy.r_arm.r_wrist_roll: 0,
}
</code></pre><p>and then used <em>goto()</em> like this:</p><pre><code class=language-python>goto(
	goal_positions=right_angled_position,
	duration=1.0,
	interpolation_mode=InterpolationMode.MINIMUM_JERK
	)
</code></pre><p>Here we have used what is called <strong>joint coordinates</strong> to move Reachy. This means that we have controlled each joint separately.</p><p>The thing is that controlling a robot in joint coordinates can be hard and is often far from what we actually do as humans. When we want to grasp an object in front of us, we think of where we should put our hand, not how to flex each individual muscle to reach this position. This approach relies on the cartesian coordinates: the 3D position and orientation in space, this is where the <strong>kinematic model</strong> comes into play.</p><h3 id=kinematic-model>Kinematic model <a href=#kinematic-model class=anchor aria-hidden=true>#</a></h3><p>The <strong>kinematic model</strong> describes the motion of a robot in mathematical form without considering the forces and torque affecting it. It only focuses on the geometric relationship between elements.</p><p>We have defined the whole kinematic model of the arm. This means the translation and rotation required to go from one joint to the next one. On a right arm equipped with a force gripper this actually look like this:</p><table><thead><tr><th>Motor</th><th>Translation</th><th>Rotation</th></tr></thead><tbody><tr><td>r_shoulder_pitch</td><td>(0, -0.019, 0)</td><td>(0, 1, 0)</td></tr><tr><td>r_shoulder_roll</td><td>(0, 0, 0)</td><td>(1, 0, 0)</td></tr><tr><td>r_arm_yaw</td><td>(0, 0, 0)</td><td>(0, 0, 1)</td></tr><tr><td>r_elbow_pitch</td><td>(0, 0, -0.28)</td><td>(0, 1, 0)</td></tr><tr><td>r_forearm_yaw</td><td>(0, 0, 0)</td><td>(0, 0, 1)</td></tr><tr><td>r_wrist_pitch</td><td>(0, 0, -0.25)</td><td>(0, 1, 0)</td></tr><tr><td>r_wrist_roll</td><td>(0, 0, -0.0325)</td><td>(1, 0, 0)</td></tr><tr><td>r_gripper</td><td>(0, -0.01, -0.075)</td><td>(0, 0, 0)</td></tr></tbody></table><p>To use and understand the kinematic model, you need to know how Reachy coordinate system is defined (from Reachy&rsquo;s perspective), see below:</p><p align=center><img alt src=/images/sdk/first-moves/arm_axis_hu4c5db151f80f351e8768e2af06d7b8e8_182591_400x0_resize_box_3.png width=400 height=748></p><ul><li>the X axis corresponds to the foward arrow,</li><li>the Y axis corresponds to the right to left arrow,</li><li>the Z axis corresponds to the up arrow.</li></ul><p>The origin of this coordinate system is located in the upper part of the robot trunk, inside Reachy.
Basically, if you imagine a segment going from the left shoulder to the right shoulder of the robot, the origin is the middle of this segment, which corresponds to behind the center of Pollen&rsquo;s logo on Reachy&rsquo;s torso.</p><p align=center><img alt src=/images/sdk/first-moves/reachy_frame_huf58815f72664d5e9f00ca6f44185375d_183471_400x0_resize_q75_box.jpg width=400 height=266></p><p>The units used for this coordinate system are the meter. So the point (0.3, -0.2, 0) is 30cm in front of the origin, 20cm to the right and at the same height.</p><h3 id=switching-between-joint-and-cartesian-coordinates>Switching between joint and cartesian coordinates <a href=#switching-between-joint-and-cartesian-coordinates class=anchor aria-hidden=true>#</a></h3><p>Forward and inverse kinematics are a way to go from one coordinates system to the other:</p><ul><li><strong>forward kinematics: joint coordinates –> cartesian coordinates</strong>,</li><li><strong>inverse kinematics: cartesian coordinates –> joint coordinates</strong>.</li></ul><h2 id=forward-kinematics>Forward kinematics <a href=#forward-kinematics class=anchor aria-hidden=true>#</a></h2><p>Using the kinematic model defined above, we can compute the 3D position and orientation of the right or left end-effector with the <em>forward_kinematics</em> method.</p><p>We consider the end-effector to be in a virtual joint located in the gripper and referred as <em>&lsquo;right_tip&rsquo;</em> or <em>&rsquo;left_tip&rsquo;</em> in the <a href=https://github.com/pollen-robotics/reachy_kinematics/blob/master/reachy.URDF>urdf file</a>, as shown below.</p><p align=center><img alt src=/images/sdk/first-moves/eef_hud7096dce529dcb064d62f1e322044638_19445_400x0_resize_box_3.png width=400 height=338></p><p>The red dot corresponds to the <em>&lsquo;right_tip&rsquo;</em>.</p><p>You can see the right and left end-effectors animated below.</p><p align=center><video controls width=80% autoplay loop>
<source type=video/mp4 src=/videos/sdk/first-moves/eef.mp4></source><p>Your browser does not support the video element.</p></video></p><p>Each arm has a <em>forward_kinematics</em> method. To use it, you first need to connect to your Reachy.</p><pre><code class=language-python>from reachy_sdk import ReachySDK

reachy = ReachySDK(host='192.168.0.42')  # Replace with the actual IP

reachy.r_arm.forward_kinematics()
&gt;&gt;&gt; array([[ 0.04622308, -0.03799621, -0.99820825,  0.31144822],
       [ 0.10976691,  0.99341829, -0.03273101, -0.19427524],
       [ 0.99288199, -0.1080573 ,  0.05008958, -0.4255104 ],
       [ 0.        ,  0.        ,  0.        ,  1.        ]])
</code></pre><p>The 4x4 matrix returned by the <em>forward_kinematics</em> method is what is often called a <strong>pose</strong>. It actually encodes both the 3D translation (as a 3D vector) and the 3D rotation (as a 3x3 matrix) into one single representation.</p><p>$$\begin{bmatrix}
R_{11} & R_{12} & R_{13} & T_x\\\
R_{21} & R_{22} & R_{23} & T_y\\\
R_{31} & R_{32} & R_{33} & T_z\\\
0 & 0 & 0 & 1
\end{bmatrix}$$</p><p>The instruction</p><pre><code class=language-python>reachy.r_arm.forward_kinematics()
</code></pre><p>returns the current pose of the right end-effector, based on the present position of every joint in the right arm.</p><p>You can also compute the pose for a given joints position, to do that just pass the list of position as argument of forward_kinematics. Be careful to respect the order of the position you give and to give all the joints in the arm kinematic chain (i.e. from <em>shoulder_pitch</em> to <em>wrist_roll</em>).</p><p>For example, we can compute the forward kinematics for the right-angle position we defined earlier.</p><pre><code class=language-python>reachy.r_arm.forward_kinematics(right_angle_position.values())
&gt;&gt;&gt; array([[ 0.    ,  0.    , -1.    ,  0.3675],
       [ 0.    ,  1.    ,  0.    , -0.202 ],
       [ 1.    ,  0.    ,  0.    , -0.28  ],
       [ 0.    ,  0.    ,  0.    ,  1.    ]])
</code></pre><p>With this result, we can tell that when the right arm is in the right angle position, the right end-effector is 37cm in front of the origin, 20cm to the left and 28cm below the origin.</p><p>As of the rotation matrix, the identity matrix corresponds to the zero position of the robot which is when the hand is facing toward the bottom.</p><p>Here we obtained the rotation matrix</p><p>$$\begin{bmatrix}
0 & 0 & -1\\\
0 & 1 & 0 \\\
1 & 0 & 0
\end{bmatrix}$$</p><p>We can use scipy to understand what this matrix represents.</p><pre><code class=language-python>from scipy.spatial.transform import Rotation as R
import numpy as np

R.from_matrix([
    [0, 0, -1],
    [0, 1, 0],
    [1, 0, 0],
]).as_euler('xyz', degrees=True)
&gt;&gt;&gt; array([  0.        , -89.99999879,   0.        ])
</code></pre><p>So scipy tells us that a rotation of -90° along the y axis has been made to get this matrix, which is coherent with the result because having the hand facing forward corresponds to this rotation according to Reachy&rsquo;s xyz axis that we saw above.</p><h2 id=inverse-kinematics>Inverse kinematics <a href=#inverse-kinematics class=anchor aria-hidden=true>#</a></h2><p>Knowing where you arm is located in the 3D space can be useful but most of the time what you want is to move the arm in cartesian coordinates. You want to have the possibility to say: “move your hand to [x, y, z] with a 90° rotation around the Y axis”.</p><p>This is what inverse kinematics does. We have provided a method to help you with that. You need to give it a 4x4 target pose, like the one given by the forward kinematics, and an initial joint state.</p><h3 id=example-square-movement>Example: square movement <a href=#example-square-movement class=anchor aria-hidden=true>#</a></h3><h4 id=defining-the-poses>Defining the poses <a href=#defining-the-poses class=anchor aria-hidden=true>#</a></h4><p>To make this more concrete, let&rsquo;s first try with a simple example. We will make the right hand draw a square in 3D space. To draw it, we will define the four corners of a square and Reachy&rsquo;s right hand will go to each of them.</p><p>The virtual corner is represented below.</p><p align=center><img alt src=/images/sdk/first-moves/square_setup_hua4da83efb9845d0aeead28f69916a972_173470_400x0_resize_q75_box.jpg width=400 height=423></p><p>For our starting corner A, let&rsquo;s imagine a point in front of the robot, on its right and below its base. With Reachy coordinate system, we can define such a point with the following coordinates:</p><p>$$A = \begin{pmatrix}0.3 & -0.4 & -0.3\end{pmatrix}$$</p><p>The coordinates of B should match A except the z component wich should be higher. Hence</p><p>$$B = \begin{pmatrix}0.3 & -0.4 & 0.0\end{pmatrix}$$</p><p>For the corner C, we want a point on the same z level as B in the inner space of Reachy and in the same plane as A and B so we only need to change the y component of B. We can take for example</p><p>$$C = \begin{pmatrix}0.3 & -0.1 & 0.0\end{pmatrix}$$</p><p>And to complete our corners we can deduce D from A and C. D coordinates should match C except its z component which must the same as A. Hence</p><p>$$D = \begin{pmatrix}0.3 & -0.1 & -0.3\end{pmatrix}$$</p><blockquote><p><strong>Remember that you always have to provide poses to the inverse kinematics that are actually reachable by the robot.</strong> If you&rsquo;re not sure whether the 3D point that you defined is reachable by Reachy, you can move the arm with your hand in compliant mode, ask the forward kinematics and check the 3D translation component of the returned pose.</p></blockquote><p>But having the 3D position is not enough to design a pose. You also need to provide the 3D orientation via a rotation matrix. The rotation matrix is often the tricky part when building a target pose matrix.</p><p>Keep in mind that the identity rotation matrix corresponds to the zero position of the robot which is when the hand is facing toward the bottom. So if we want the hand facing forward when drawing our virtual square, we need to rotate it from -90° around the y axis, as we saw in the forward kinematics part.</p><p>We know from before which rotation matrix corresponds to this rotation, but we can use scipy again to generate the rotation matrix for given rotations.</p><pre><code class=language-python>print(np.around(R.from_euler('y', np.deg2rad(-90)).as_matrix(), 3))
&gt;&gt;&gt; [[ 0. -0. -1.]
 [ 0.  1. -0.]
 [ 1.  0.  0.]]
</code></pre><p>We got the rotation matrix that we expected!</p><p>As mentionned, building the pose matrix can be hard, so don&rsquo;t hesitate to use scipy to build your rotation matrix. You can also move the arm with your hand where you want it to be and use the forward kinematics to get an approximation of the target pose matrix you would give to the inverse kinematics.</p><p>Here, having the rotation matrix and the 3D positions for our points A and B, we can build both target pose matrices.</p><pre><code class=language-python>A = np.array([
  [0, 0, -1, 0.3],
  [0, 1, 0, -0.4],  
  [1, 0, 0, -0.3],
  [0, 0, 0, 1],  
])

B = np.array([
  [0, 0, -1, 0.3],
  [0, 1, 0, -0.4],  
  [1, 0, 0, 0.0],
  [0, 0, 0, 1],  
])

C = np.array([
  [0, 0, -1, 0.3],
  [0, 1, 0, -0.1],  
  [1, 0, 0, 0.0],
  [0, 0, 0, 1],  
])

D = np.array([
  [0, 0, -1, 0.3],
  [0, 1, 0, -0.1],  
  [1, 0, 0, -0.3],
  [0, 0, 0, 1],  
])
</code></pre><h4 id=computing-the-joint-positions>Computing the joint positions <a href=#computing-the-joint-positions class=anchor aria-hidden=true>#</a></h4><p><em>inverse_kinematics()</em> takes one optional argument, <em>q0</em>, which is the starting point of the inverse kinematics computation. If no <em>q0</em> is given, <em>q0</em> is considered to be equal to the present joints position.</p><p>Inverse kinematics is a really powerful way to define motions in coordinate systems that fits better with the defintion of many tasks (grasp the bottle in (x, y, z) for instance). Yet, this approach has also some important limitations.</p><p>It&rsquo;s important to understand that while the forward kinematics has a unique and well defined solution, the inverse kinematics is a much harder and ill defined problem. A Right Arm with a Gripper has 8 Degrees Of Freedom meaning that you may have multiple solutions to reach the same 3D point in space.</p><p>Because the inverse kinematics algorithm used is based on optimisation techniques, giving a starting point <em>q0</em> may have a tremendous influence on the final result.</p><p>Now let&rsquo;s use the inverse kinematics to move between our two points A and B! We will consider that the starting point is the right angled position that we used before, then the arm will go to A and finish at B.</p><pre><code class=language-python>joint_pos_A = reachy.r_arm.inverse_kinematics(A)
joint_pos_B = reachy.r_arm.inverse_kinematics(B)
joint_pos_C = reachy.r_arm.inverse_kinematics(C)
joint_pos_D = reachy.r_arm.inverse_kinematics(D)
</code></pre><h4 id=sending-the-movements-commands>Sending the movements commands <a href=#sending-the-movements-commands class=anchor aria-hidden=true>#</a></h4><p>As before, we use the <em>goto()</em> to send moving instructions to the arm.</p><pre><code class=language-python>import time
# put the joints in stiff mode
reachy.turn_on('r_arm')

# use the goto function
goto({joint: pos for joint,pos in zip(reachy.r_arm.joints.values(), joint_pos_A)}, duration=1.0)
time.sleep(0.5)
goto({joint: pos for joint,pos in zip(reachy.r_arm.joints.values(), joint_pos_B)}, duration=1.0)
time.sleep(0.5)
goto({joint: pos for joint,pos in zip(reachy.r_arm.joints.values(), joint_pos_C)}, duration=1.0)
time.sleep(0.5)
goto({joint: pos for joint,pos in zip(reachy.r_arm.joints.values(), joint_pos_D)}, duration=1.0)

# put the joints back to compliant mode
# use turn_off_smoothly to prevent the arm from falling hard
reachy.turn_off_smoothly('r_arm')
</code></pre><p>The result should look like this:</p><p align=center><video controls width=80% autoplay loop>
<source type=video/mp4 src=/videos/sdk/first-moves/goto_ik.mp4></source><p>Your browser does not support the video element.</p></video></p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=/sdk/first-moves/record/><div class="card my-1"><div class="card-body py-2">&larr; Record and play trajectories</div></div></a><a class=ms-auto href=/sdk/first-moves/intro/><div class="card my-1"><div class="card-body py-2">Once you're connected &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://www.netlify.com/>Netlify</a>, <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.7315382e899a7d7132d93fdf0d6682c67a93f0e72ee1a757f33f3207de3b14e2460a935c9d4cec78f86d94ab892d053c70540695eed0bbb7bf5bdc979e6f5a9f.js integrity="sha512-cxU4LomafXEy2T/fDWaCxnqT8Ocu4adX8z8yB947FOJGCpNcnUzsePhtlKuJLQU8cFQGle7Qu7e/W9yXnm9anw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.8b2d7ddd72ba2c88d5107387eb3b66b90f1f864fd5afef6aed284425efb5919a9bc092f653f2985a205b85b0a158f70b460643ba2b71ccf7d3c1c107c3a4b609.js integrity="sha512-iy193XK6LIjVEHOH6ztmuQ8fhk/Vr+9q7ShEJe+1kZqbwJL2U/KYWiBbhbChWPcLRgZDuitxzPfTwcEHw6S2CQ==" crossorigin=anonymous defer></script>
<script src=/main.min.57d9a84956f7d60008c47938c7fdd2f75e8618ff1d09c5a5e2b32f91debaf7681f7ceca8b51aded60067c2136172134a91ebc0674487c76a04e3244d927ebdde.js integrity="sha512-V9moSVb31gAIxHk4x/3S916GGP8dCcWl4rMvkd6692gffOyotRre1gBnwhNhchNKkevAZ0SHx2oE4yRNkn693g==" crossorigin=anonymous defer></script>
<script src=https://doks-child-theme.netlify.app/index.min.2bf4f6d60e7218a505691df3c5265d03c4759ff94553c0deede15138e14b4abc461e6b5fca278f2bcc663d41e03ac41d58f49d3b01596fb82c6f92b00022f50f.js integrity="sha512-K/T21g5yGKUFaR3zxSZdA8R1n/lFU8De7eFROOFLSrxGHmtfyiePK8xmPUHgOsQdWPSdOwFZb7gsb5KwACL1Dw==" crossorigin=anonymous defer></script></body></html>